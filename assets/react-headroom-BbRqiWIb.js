import{g as W}from"./@codaworks-BuU-DaXc.js";import{r as K}from"./react-GWSldd-q.js";import{r as B}from"./prop-types-Chjiymov.js";import{r as F}from"./shallowequal-AJ2w-mwJ.js";import{r as V}from"./raf-DA3ciu1N.js";var v={},g={},T;function $(){return T||(T=1,Object.defineProperty(g,"__esModule",{value:!0}),g.default=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=u>=d?"down":"up",r=Math.abs(u-d);return p.disable?{action:"none",scrollDirection:s,distanceScrolled:r}:p.pin?{action:l.state!=="pinned"?"pin":"none",scrollDirection:s,distanceScrolled:r}:u<=p.pinStart&&l.state!=="unfixed"?{action:"unfix",scrollDirection:s,distanceScrolled:r}:u<=l.height&&s==="down"&&l.state==="unfixed"?{action:"none",scrollDirection:s,distanceScrolled:r}:u>l.height+p.pinStart&&s==="down"&&l.state==="unfixed"?{action:"unpin-snap",scrollDirection:s,distanceScrolled:r}:s==="down"&&["pinned","unfixed"].indexOf(l.state)>=0&&u>l.height+p.pinStart&&r>p.downTolerance?{action:"unpin",scrollDirection:s,distanceScrolled:r}:s==="up"&&r>p.upTolerance&&["pinned","unfixed"].indexOf(l.state)<0?{action:"pin",scrollDirection:s,distanceScrolled:r}:s==="up"&&u<=l.height&&["pinned","unfixed"].indexOf(l.state)<0?{action:"pin",scrollDirection:s,distanceScrolled:r}:{action:"none",scrollDirection:s,distanceScrolled:r}}),g}var S={},E;function A(){if(E)return S;E=1,Object.defineProperty(S,"__esModule",{value:!0}),S.default=d;function d(){var u=!1;try{var p={get passive(){return u=!0,!1}};window.addEventListener("test",null,p),window.removeEventListener("test",null,p)}catch{u=!1}return u}return S}var P;function G(){if(P)return v;P=1,Object.defineProperty(v,"__esModule",{value:!0});var d=Object.assign||function(i){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(i[e]=a[e])}return i},u=function(){function i(n,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,a,e){return a&&i(n.prototype,a),e&&i(n,e),n}}(),p=K(),l=f(p),s=B(),r=f(s),D=F(),O=f(D),L=V(),H=f(L),Y=$(),R=f(Y),U=A(),z=f(U);function f(i){return i&&i.__esModule?i:{default:i}}function x(i,n){var a={};for(var e in i)n.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(i,e)&&(a[e]=i[e]);return a}function k(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function N(i,n){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:i}function q(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(i,n):i.__proto__=n)}var y=function(){},b=function(i){q(n,i),u(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){return e.disable&&t.state!=="unfixed"?{translateY:0,className:"headroom headroom--unfixed headroom-disable-animation",animation:!1,state:"unfixed"}:null}}]);function n(a){k(this,n);var e=N(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,a));return e.setRef=function(t){return e.inner=t},e.setHeightOffset=function(){e.setState({height:e.inner?e.inner.offsetHeight:""}),e.resizeTicking=!1},e.getScrollY=function(){return e.props.parent().pageYOffset!==void 0?e.props.parent().pageYOffset:e.props.parent().scrollTop!==void 0?e.props.parent().scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},e.getViewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},e.getDocumentHeight=function(){var t=document.body,c=document.documentElement;return Math.max(t.scrollHeight,c.scrollHeight,t.offsetHeight,c.offsetHeight,t.clientHeight,c.clientHeight)},e.getElementPhysicalHeight=function(t){return Math.max(t.offsetHeight,t.clientHeight)},e.getElementHeight=function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},e.getScrollerPhysicalHeight=function(){var t=e.props.parent();return t===window||t===document.body?e.getViewportHeight():e.getElementPhysicalHeight(t)},e.getScrollerHeight=function(){var t=e.props.parent();return t===window||t===document.body?e.getDocumentHeight():e.getElementHeight(t)},e.isOutOfBound=function(t){var c=t<0,o=e.getScrollerPhysicalHeight(),m=e.getScrollerHeight(),w=t+o>m;return c||w},e.handleScroll=function(){e.scrollTicking||(e.scrollTicking=!0,(0,H.default)(e.update))},e.handleResize=function(){e.resizeTicking||(e.resizeTicking=!0,(0,H.default)(e.setHeightOffset))},e.unpin=function(){e.props.onUnpin(),e.setState({translateY:"-100%",className:"headroom headroom--unpinned",animation:!0,state:"unpinned"})},e.unpinSnap=function(){e.props.onUnpin(),e.setState({translateY:"-100%",className:"headroom headroom--unpinned headroom-disable-animation",animation:!1,state:"unpinned"})},e.pin=function(){e.props.onPin(),e.setState({translateY:0,className:"headroom headroom--pinned",animation:!0,state:"pinned"})},e.unfix=function(){e.props.onUnfix(),e.setState({translateY:0,className:"headroom headroom--unfixed headroom-disable-animation",animation:!1},function(){setTimeout(function(){e.setState({state:"unfixed"})},0)})},e.update=function(){if(e.currentScrollY=e.getScrollY(),!e.isOutOfBound(e.currentScrollY)){var t=(0,R.default)(e.lastKnownScrollY,e.currentScrollY,e.props,e.state),c=t.action;c==="pin"?e.pin():c==="unpin"?e.unpin():c==="unpin-snap"?e.unpinSnap():c==="unfix"&&e.unfix()}e.lastKnownScrollY=e.currentScrollY,e.scrollTicking=!1},e.currentScrollY=0,e.lastKnownScrollY=0,e.scrollTicking=!1,e.resizeTicking=!1,e.eventListenerOptions=!1,e.state={state:"unfixed",translateY:0,className:"headroom headroom--unfixed"},e}return u(n,[{key:"componentDidMount",value:function(){this.setHeightOffset(),this.eventListenerOptions=(0,z.default)()?{passive:!0,capture:!1}:!1,this.props.disable||(this.props.parent().addEventListener("scroll",this.handleScroll,this.eventListenerOptions),this.props.calcHeightOnResize&&this.props.parent().addEventListener("resize",this.handleResize,this.eventListenerOptions))}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,O.default)(this.props,e)||!(0,O.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e,t){e.children!==this.props.children&&this.setHeightOffset(),!e.disable&&this.props.disable?(this.props.parent().removeEventListener("scroll",this.handleScroll,this.eventListenerOptions),this.props.parent().removeEventListener("resize",this.handleResize,this.eventListenerOptions),t.state!=="unfixed"&&this.state.state==="unfixed"&&this.props.onUnfix()):e.disable&&!this.props.disable&&(this.props.parent().addEventListener("scroll",this.handleScroll,this.eventListenerOptions),this.props.calcHeightOnResize&&this.props.parent().addEventListener("resize",this.handleResize,this.eventListenerOptions)),e.pin!==this.props.pin&&this.handleScroll()}},{key:"componentWillUnmount",value:function(){this.props.parent()&&(this.props.parent().removeEventListener("scroll",this.handleScroll,this.eventListenerOptions),this.props.parent().removeEventListener("resize",this.handleResize,this.eventListenerOptions)),window.removeEventListener("scroll",this.handleScroll,this.eventListenerOptions)}},{key:"render",value:function(){var e=this.props,t=e.className,c=e.tag,o=x(e,["className","tag"]);delete o.onUnpin,delete o.onPin,delete o.onUnfix,delete o.disableInlineStyles,delete o.disable,delete o.pin,delete o.parent,delete o.children,delete o.upTolerance,delete o.downTolerance,delete o.pinStart,delete o.calcHeightOnResize;var m=o.style,w=o.wrapperStyle,M=x(o,["style","wrapperStyle"]),h={position:this.props.disable||this.state.state==="unfixed"?"relative":"fixed",top:0,left:0,right:0,zIndex:1,WebkitTransform:"translate3D(0, "+this.state.translateY+", 0)",MsTransform:"translate3D(0, "+this.state.translateY+", 0)",transform:"translate3D(0, "+this.state.translateY+", 0)"},_=this.state.className;this.state.animation&&(h=d({},h,{WebkitTransition:"all .2s ease-in-out",MozTransition:"all .2s ease-in-out",OTransition:"all .2s ease-in-out",transition:"all .2s ease-in-out"}),_+=" headroom--scrolled"),this.props.disableInlineStyles?h=m:h=d({},h,m);var j=d({},w,{height:this.state.height?this.state.height:null}),I=t?t+" headroom-wrapper":"headroom-wrapper";return l.default.createElement(c,{style:j,className:I},l.default.createElement("div",d({ref:this.setRef},M,{style:h,className:_}),this.props.children))}}]),n}(p.Component);return b.propTypes={className:r.default.string,parent:r.default.func,children:r.default.any.isRequired,disableInlineStyles:r.default.bool,disable:r.default.bool,pin:r.default.bool,upTolerance:r.default.number,downTolerance:r.default.number,onPin:r.default.func,onUnpin:r.default.func,onUnfix:r.default.func,wrapperStyle:r.default.object,pinStart:r.default.number,style:r.default.object,calcHeightOnResize:r.default.bool,tag:r.default.string},b.defaultProps={parent:function(){return window},disableInlineStyles:!1,disable:!1,pin:!1,upTolerance:5,downTolerance:0,onPin:y,onUnpin:y,onUnfix:y,wrapperStyle:{},pinStart:0,calcHeightOnResize:!0,tag:"div"},v.default=b,v}var J=G();const te=W(J);export{te as H};
