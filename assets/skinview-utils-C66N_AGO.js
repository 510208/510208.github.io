function C(t){return t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}function a(t,e,i,r,n){const o=t.getImageData(e,i,r,n);for(let f=0;f<r;f++)for(let h=0;h<n;h++){const s=(f+h*r)*4;if(o.data[s+3]!==255)return!0}return!1}function l(t){return t/64}function u(t,e,i){if(i){if(a(t,0,0,e,e))return}else if(a(t,0,0,e,e/2))return;const r=l(e),n=(o,f,h,s)=>t.clearRect(o*r,f*r,h*r,s*r);n(40,0,8,8),n(48,0,8,8),n(32,8,8,8),n(40,8,8,8),n(48,8,8,8),n(56,8,8,8),i&&(n(4,32,4,4),n(8,32,4,4),n(0,36,4,12),n(4,36,4,12),n(8,36,4,12),n(12,36,4,12),n(20,32,8,4),n(28,32,8,4),n(16,36,4,12),n(20,36,8,12),n(28,36,4,12),n(32,36,8,12),n(44,32,4,4),n(48,32,4,4),n(40,36,4,12),n(44,36,4,12),n(48,36,4,12),n(52,36,12,12),n(4,48,4,4),n(8,48,4,4),n(0,52,4,12),n(4,52,4,12),n(8,52,4,12),n(12,52,4,12),n(52,48,4,4),n(56,48,4,4),n(48,52,4,12),n(52,52,4,12),n(56,52,4,12),n(60,52,4,12))}function w(t,e){t.save(),t.scale(-1,1);const i=l(e),r=(n,o,f,h,s,c)=>t.drawImage(t.canvas,n*i,o*i,f*i,h*i,-s*i,c*i,-f*i,h*i);r(4,16,4,4,20,48),r(8,16,4,4,24,48),r(0,20,4,12,24,52),r(4,20,4,12,20,52),r(8,20,4,12,16,52),r(12,20,4,12,28,52),r(44,16,4,4,36,48),r(48,16,4,4,40,48),r(40,20,4,12,40,52),r(44,20,4,12,36,52),r(48,20,4,12,32,52),r(52,20,4,12,44,52),t.restore()}function k(t,e){let i=!1;if(e.width!==e.height)if(e.width===2*e.height)i=!0;else throw new Error(`Bad skin size: ${e.width}x${e.height}`);const r=t.getContext("2d",{willReadFrequently:!0});if(i){const n=e.width;t.width=n,t.height=n,r.clearRect(0,0,n,n),r.drawImage(e,0,0,n,n/2),w(r,n),u(r,t.width,!1)}else t.width=e.width,t.height=e.height,r.clearRect(0,0,e.width,e.height),r.drawImage(e,0,0,t.width,t.height),u(r,t.width,!0)}function x(t){if(t.width===2*t.height)return t.width/64;if(t.width*17===t.height*22)return t.width/22;if(t.width*11===t.height*23)return t.width/46;throw new Error(`Bad cape size: ${t.width}x${t.height}`)}function I(t,e){const i=x(e);t.width=64*i,t.height=32*i;const r=t.getContext("2d",{willReadFrequently:!0});r.clearRect(0,0,t.width,t.height),r.drawImage(e,0,0,e.width,e.height)}function y(t,e,i,r,n){const o=t.getImageData(e,i,r,n);for(let f=0;f<r;f++)for(let h=0;h<n;h++){const s=(f+h*r)*4;if(!(o.data[s+0]===0&&o.data[s+1]===0&&o.data[s+2]===0&&o.data[s+3]===255))return!1}return!0}function g(t,e,i,r,n){const o=t.getImageData(e,i,r,n);for(let f=0;f<r;f++)for(let h=0;h<n;h++){const s=(f+h*r)*4;if(!(o.data[s+0]===255&&o.data[s+1]===255&&o.data[s+2]===255&&o.data[s+3]===255))return!1}return!0}function S(t){const e=l(t.width),i=t.getContext("2d",{willReadFrequently:!0}),r=(h,s,c,d)=>a(i,h*e,s*e,c*e,d*e),n=(h,s,c,d)=>y(i,h*e,s*e,c*e,d*e),o=(h,s,c,d)=>g(i,h*e,s*e,c*e,d*e);return r(50,16,2,4)||r(54,20,2,12)||r(42,48,2,4)||r(46,52,2,12)||n(50,16,2,4)&&n(54,20,2,12)&&n(42,48,2,4)&&n(46,52,2,12)||o(50,16,2,4)&&o(54,20,2,12)&&o(42,48,2,4)&&o(46,52,2,12)?"slim":"default"}function p(t){if(t.width===t.height*2&&t.height%7===0)return t.height/7;throw new Error(`Bad ears size: ${t.width}x${t.height}`)}function T(t,e){const i=p(e);t.width=14*i,t.height=7*i;const r=t.getContext("2d",{willReadFrequently:!0});r.clearRect(0,0,t.width,t.height),r.drawImage(e,0,0,e.width,e.height)}function E(t,e){if(e.width!==e.height&&e.width!==2*e.height)throw new Error(`Bad skin size: ${e.width}x${e.height}`);const i=l(e.width),r=14*i,n=7*i;t.width=r,t.height=n;const o=t.getContext("2d",{willReadFrequently:!0});o.clearRect(0,0,r,n),o.drawImage(e,24*i,0,r,n,0,0,r,n)}async function R(t){const e=document.createElement("img");return new Promise((i,r)=>{e.onload=()=>i(e),e.onerror=r,e.crossOrigin="anonymous",typeof t=="string"?e.src=t:(t.crossOrigin!==void 0&&(e.crossOrigin=t.crossOrigin),t.referrerPolicy!==void 0&&(e.referrerPolicy=t.referrerPolicy),e.src=t.src)})}export{S as a,E as b,R as c,I as d,T as e,C as i,k as l};
