---
import { Card, CardContent, CardHeader } from "@/components/ui/card";
import { Info, MapPin } from "lucide-react";
---

<section id="sh-intro-section" class="relative overflow-hidden w-full">
  <div
    id="sh-intro-description"
    class="flex flex-col gap-4 text-lg text-gray-300 leading-7 mx-auto lg:mx-0 justify-center items-center"
  >
    <h2 class="text-4xl font-bold">關於我</h2>

    <div class="grid grid-cols-5 grid-rows-5 gap-5 w-full max-w-300">
      <Card
        id="sh-about-description-card"
        className="col-span-2 row-span-4 col-start-1 row-start-1 shadow relative overflow-hidden"
      >
        <CardHeader
          id="sh-about-description-card-header"
          className="flex gap-2 items-center font-bold relative z-10"
        >
          <Info size={20} strokeWidth={3} />
          自我介紹
        </CardHeader>
        <CardContent
          id="sh-about-description-card-content"
          className="[&>p]:not-last-child:mb-4 relative z-10"
        >
          <p class="lead-8 mb-2">
            嗨！我是 SamHacker，一個熱愛 Coding 的高中生。
          </p>
          <p class="lead-8 mb-2">
            現年（2025 年）
            <span id="sh-intro-age" class="font-bold">:D</span>
            歲，善於運用 TypeScript、Python 等語言。<br />
            最近在學習 Next.js、Vite、React、GSAP 等框架，也計畫要涉獵 Svelte、Vue
            等框架。
          </p>
          <p>前端可能還算可以，但做後端就真的完全不行。</p>
        </CardContent>
      </Card>
      <Card className="col-span-2 row-span-2 col-start-3 row-start-1 shadow" />
      <Card className="col-span-2 row-start-5">5</Card>
      <Card
        className="col-span-2 row-span-3 col-start-3 row-start-3 relative overflow-hidden min-h-50"
      >
        <canvas
          id="sh-intro-cobe-canvas"
          class="absolute -bottom-2/3 left-1/3"
          width="400"
          height="400"></canvas>
        <CardHeader className="flex gap-2 items-center font-bold relative z-10">
          <MapPin size={20} strokeWidth={3} />臺中市，臺灣
        </CardHeader>
      </Card>
    </div>
  </div>
</section>

<script>
  // import createGlobe from "cobe";
  import createGlobe from "cobe";

  let phi = 0;
  let canvas = document.getElementById(
    "sh-intro-cobe-canvas",
  ) as HTMLCanvasElement;

  const globe = createGlobe(canvas, {
    devicePixelRatio: 2,
    width: 500,
    height: 500,
    phi: 0,
    theta: 0,
    dark: 1,
    diffuse: 2,
    mapSamples: 16_000,
    mapBrightness: 2,
    baseColor: [0.8, 0.8, 0.8],
    markerColor: [1, 1, 1],
    glowColor: [0.5, 0.5, 0.5],
    markers: [
      { location: [24.110780463476758, 120.68685405275627], size: 0.1 },
    ],
    scale: 1.05,
    opacity: 0.9,
    onRender: (state) => {
      state.phi = phi;
      phi += 0.01;
    },
  });
</script>

<script>
  // 計算年齡
  document.addEventListener("DOMContentLoaded", () => {
    const birthDate = new Date("2008-05-15");
    const today = new Date();
    let age = today.getFullYear() - birthDate.getFullYear();
    const monthDiff = today.getMonth() - birthDate.getMonth();
    if (
      monthDiff < 0 ||
      (monthDiff === 0 && today.getDate() < birthDate.getDate())
    ) {
      age--;
    }
    // 更新年齡元素
    const ageElement = document.getElementById("sh-intro-age");
    if (ageElement) {
      ageElement.textContent = age.toString();
    }
  });
</script>
