---
const { href } = Astro.props;
---

<div
  class="relative aspect-square w-full flex justify-center items-center group"
>
  <!-- 四角圓點裝飾 -->
  <div
    class="sh-corner-dot absolute top-1/2 left-1/2 w-1.5 h-1.5 bg-stone-600 rounded-full opacity-50 -translate-x-1/2 -translate-y-1/2"
    data-corner="top-left"
  >
  </div>
  <div
    class="sh-corner-dot absolute top-1/2 left-1/2 w-1.5 h-1.5 bg-stone-600 rounded-full opacity-50 -translate-x-1/2 -translate-y-1/2"
    data-corner="top-right"
  >
  </div>
  <div
    class="sh-corner-dot absolute top-1/2 left-1/2 w-1.5 h-1.5 bg-stone-600 rounded-full opacity-50 -translate-x-1/2 -translate-y-1/2"
    data-corner="bottom-left"
  >
  </div>
  <div
    class="sh-corner-dot absolute top-1/2 left-1/2 w-1.5 h-1.5 bg-stone-600 rounded-full opacity-50 -translate-x-1/2 -translate-y-1/2"
    data-corner="bottom-right"
  >
  </div>

  <a
    href={href}
    target="_blank"
    rel="noopener noreferrer"
    class="flex justify-center items-center relative z-10"
  >
    <slot />
  </a>
</div>

<script>
  import { gsap } from "gsap";

  document.addEventListener("DOMContentLoaded", () => {
    const containers = document.querySelectorAll(".group");

    containers.forEach((container) => {
      const dots = container.querySelectorAll(".sh-corner-dot");

      // 設定初始狀態
      gsap.set(dots, {
        x: 0,
        y: 0,
        opacity: 0,
        scale: 0.8,
      });

      container.addEventListener("mouseenter", () => {
        dots.forEach((dot) => {
          const corner = dot.getAttribute("data-corner");
          let targetX = 0;
          let targetY = 0;

          switch (corner) {
            case "top-left":
              targetX = -30;
              targetY = -30;
              break;
            case "top-right":
              targetX = 30;
              targetY = -30;
              break;
            case "bottom-left":
              targetX = -30;
              targetY = 30;
              break;
            case "bottom-right":
              targetX = 30;
              targetY = 30;
              break;
          }

          gsap.to(dot, {
            x: targetX,
            y: targetY,
            scale: 1,
            opacity: 1,
            duration: 0.3,
            ease: "back.out(1.7)",
          });
        });
      });

      container.addEventListener("mouseleave", () => {
        gsap.to(dots, {
          x: 0,
          y: 0,
          scale: 0.8,
          opacity: 0,
          duration: 0.3,
          ease: "power2.out",
        });
      });
    });
  });
</script>
